<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RCI Memory Lender: RCI Memory Lender</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RCI Memory Lender
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">RCI Memory Lender </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://radio-camera-initiative.github.io/rci-memory-lender/html/index.html">Documentation</a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Build Docs</h2>
<p>If html docs hosted on the GitHub pages of the repo are insufficient, you can build the html doxygen docs with the current Doxyfile configuration.</p>
<p>If on wario, use the downloaded Doxygen to compile: <code>/usr/local/bin/doxygen</code></p>
<p>On other machines, download Doxygen from source and follow installation instructions. Then run the same command.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Requirements for use</h2>
<p>The Recycler (<code><a class="el" href="classrecycle__memory.html" title="base class for memory lenders that manage pointers">recycle_memory</a></code>) must outlive all objects and threads, to be the last destroyed object.</p>
<p>The <code>shared_ptr</code> of a <code>reuseable_buffer</code> (name <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code>) must be given to each thread by copy constructor, not by reference, to extend the lifetime of the memory. Threads that only read the pointer data are included in this. However, it is required that only one thread be changing the data in the <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code> at one time, as it is not threadsafe.</p>
<p>When a <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code> stops being used (specifically, when all references go out of scope), the system will give the memory that the pointer had a reference to back to the recycler, such that the memory can be used again for the same data type.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Testing</h2>
<p>Testing is done using GoogleTest and built using CMake. From the main directory, follow these commands:</p><ol type="1">
<li><code>cd testing</code></li>
<li><code>cmake -S . -B build</code></li>
<li><code>cmake --build build</code> This will build all current tests. To run those tests, move into the <code>build</code> directory and run <code>ctest</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md4"></a>
Pointer Life Cycle</h2>
<p>The <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code> object allows the user to <code>get</code> the raw pointer to memory. This is a necessary function for use of that memory in different softwares, but be aware of the danger to go along with this.</p>
<p><b>The memory pointed to by the raw pointer is still also held in the buffer pointer</b></p>
<p>The danger in this is as follows: if <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code> which the user gets the raw pointer from goes out of scope (from the function, the thread, etc), then the memory that is pointed to is in danger of being reaped and reused. In these circumstances, the program using said memory will not know whether the memory is safe. It is the users' responsibility to ensure that the memory is still safe for the function to use, throughout its life cycle.</p>
<p>The following are things to keep in mind:</p><ul>
<li>Even if the user takes a raw pointer from <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code>, the memory is still not threadsafe. Only one thread should be changing the data at a time.</li>
<li>Any software use is suggested to be synchronous in threads rather than asynchronous. This makes keeping the <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code> in scope more likely.</li>
<li>Users should <em>never</em> delete a <code><a class="el" href="classbuffer__ptr.html" title="smart wrapper for shared_ptr">buffer_ptr</a></code>. If a specific scope is needed, use <code>{}</code> around said scope. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
